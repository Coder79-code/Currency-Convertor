<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ’µ Salehi Currency Converter</title>
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" />
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
          console.log('Service Worker registration failed:', error);
        });
    });
  }
</script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
      background-color: #f4f6f9;
    }
    select, input, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
    }
    #downloadBtn, #nativeAppBtn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ Live Currency Converter</h1>

  <input type="number" id="amount" placeholder="Enter amount" />
  <br />
  <select id="fromCurrency"></select>
  <select id="toCurrency"></select>
  <br />
  <button onclick="convertCurrency()">Convert</button>

  <div id="result">Loading currencies...</div>

  <br />
  <button id="downloadBtn" onclick="downloadHtmlApp()">ğŸ’¾ Download HTML App</button>
  <button id="nativeAppBtn" onclick="downloadNativeApp()">ğŸ“± Direct Download Native App</button>

  <script>
    const fromSelect = document.getElementById("fromCurrency");
    const toSelect = document.getElementById("toCurrency");
    const resultDiv = document.getElementById("result");

    const currencySymbols = {
      USD: '$',
      EUR: 'â‚¬',
      GBP: 'Â£',
      AFN: 'Af',
      INR: 'â‚¹',
      CNY: 'Â¥',
      JPY: 'Â¥',
      RUB: 'â‚½',
      AUD: 'A$',
      CAD: 'C$',
      PKR: 'Rs',
      TRY: 'â‚º',
      KRW: 'â‚©',
      AED: 'Dhs'
    };

    let exchangeRates = {};

    fetch("https://open.er-api.com/v6/latest/USD")
      .then(res => res.json())
      .then(data => {
        exchangeRates = data.rates;
        const currencies = Object.keys(exchangeRates);

        currencies.forEach(curr => {
          const option1 = document.createElement("option");
          option1.value = curr;
          option1.text = `${curr} ${currencySymbols[curr] || ''}`;
          fromSelect.appendChild(option1);

          const option2 = document.createElement("option");
          option2.value = curr;
          option2.text = `${curr} ${currencySymbols[curr] || ''}`;
          toSelect.appendChild(option2);
        });

        fromSelect.value = "USD";
        toSelect.value = "AFN";

        resultDiv.innerText = "Ready to convert!";
      });

    function convertCurrency() {
      const amount = parseFloat(document.getElementById("amount").value);
      const from = fromSelect.value;
      const to = toSelect.value;

      if (!amount || isNaN(amount)) {
        resultDiv.innerText = "âš ï¸ Enter a valid number";
        return;
      }

      const usdAmount = amount / exchangeRates[from];
      const converted = usdAmount * exchangeRates[to];
      const fromSymbol = currencySymbols[from] || from;
      const toSymbol = currencySymbols[to] || to;

      resultDiv.innerText = `${fromSymbol}${amount} = ${toSymbol}${converted.toFixed(2)}`;
    }

    function downloadHtmlApp() {
      const blob = new Blob([document.documentElement.outerHTML], { type: 'text/html' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = "currency_converter.html";
      link.click();
    }

    function downloadNativeApp() {
      // Ø¯Ù„ØªÙ‡ Ø®Ù¾Ù„ Android ÛŒØ§ iOS Ø§Ù¾ Ù…Ø³ØªÙ‚ÛŒÙ… Ú‰Ø§ÙˆÙ†Ù„ÙˆÚ‰ Ù„ÛŒÙ†Ú© ÙˆØ±Ú©Ú“Ù‡:
      const apkLink = "https://yourdomain.com/path/to/app.apk";  // Ø¯Ù„ØªÙ‡ Ø®Ù¾Ù„ APK ÙØ§ÛŒÙ„ Ù„ÛŒÙ†Ú© ÙˆØ±Ú©Ú“Ù‡
      // Ú©Ù‡ ØºÙˆØ§Ú“Û iOS IPA Ù‡Ù… ÙˆØ±Ú©Ú“ÛØŒ Ù‡Ù…Ø¯Ø§ Ú‰ÙˆÙ„:
      // const ipaLink = "https://yourdomain.com/path/to/app.ipa";

      // Ø§ÙˆØ³ Ø³Ø§Ø¯Ù‡ Ø¯ APK Ù„ÛŒÙ†Ú© ØªÙ‡ Ù…Ø³ØªÙ‚ÛŒÙ… ÚÙŠ:
      window.location.href = apkLink;
    }
  </script>
</body>
</html>
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#4CAF50" />
